<% if @has_access %>

<p id="notice"><%= notice %></p>

<p>
  <%= image_tag root_url + "/images/" + @image.filename, size: "400x400", alt: @image.filename %>
</p>

<% if user_signed_in? %>
  <% if current_user.name == @image_user.user.name %>
  <p>
    <strong>Owner: You</strong>
  </p>
  <% else %>
    <p>
      <strong>Owner:</strong>
      <%= @image_user.user.name %>
    </p>
  <% end %>
<% else %>
  <p>
    <strong>Owner:</strong>
    <%= @image_user.user.name %>
  </p>
<% end %>

<div class="tags_table">
  <thead>
    <tr>
      <th><strong>Tags: </strong></th><br>
    </tr>
  </thead>
  <tbody>
    <% @image.tags.each do |tag| %>
      <% if !tag.new_record? %>
        <tr>
          <td><%= tag.str %></td>
          <%= link_to 'Destroy', tag, method: :delete %><br>
        </tr>
      <% end %>
    <% end %>
  </tbody>
</div>

<% if user_signed_in? && current_user.name == @image_user.user.name %>
  <p>
    <strong>Private flag:</strong>
    <%= @image.private %>
  </p>
  <%= link_to 'Edit', edit_image_path(@image) %> |
  <%= link_to 'Destroy', @image, method: :delete, data: { confirm: 'Are you sure?' } %> |
<% end %>

<%= link_to 'Back', images_path %>

<% else %>

  <h1>Stop poking around here!</h1>

<% end %>
